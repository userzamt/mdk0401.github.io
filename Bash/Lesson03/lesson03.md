# Урок 03. Shell. Переменные. Математика
[На главную](/mdk0401.github.io)

**Shell** - это командная оболочка. Но это не просто промежуточное звено между пользователем и операционной системой, это еще и мощный язык программирования. Программы на языке shell называют сценариями, или скриптами. Фактически, из скриптов доступен полный набор команд, утилит и программ UNIX. Если этого недостаточно, то к вашим услугам внутренние команды shell - условные операторы, операторы циклов и пр., которые увеличивают мощь и гибкость сценариев. Shell-скрипты исключительно хороши при программировании задач администрирования системы и др., которые не требуют для своего создания полновесных языков программирования.

## Sha-Bang #!
В простейшем случае, скрипт -- это ни что иное, как простой список команд системы, записанный в файл. Создание скриптов поможет сохранить ваше время и силы, которые тратятся на ввод последовательности команд всякий раз, когда необходимо их выполнить.

```bash
cd /var/log
cat /dev/null > messages
cat /dev/null > wtmp
cat /dev/null > access.log
```

Здесь нет ничего необычного, это простая последовательность команд, которая может быть набрана в командной строке. **Преимущество размещения последовательности команд в скрипте состоит в том, что вам не придется всякий раз набирать эту последовательность вручную.** Кроме того, скрипты легко могут быть модифицированы или обобщены для разных применений.

```bash
#!/bin/bash

cd /var/log
cat /dev/null > messages
cat /dev/null > wtmp
cat /dev/null > access.log

echo "Log files remove"
```

Если файл сценария начинается с последовательности ```#!```, которая в мире UNIX называется *sha-bang*, то это указывает системе какой интерпретатор следует использовать для исполнения сценария. Специальный маркер, определяющий тип сценария, в данном случае. Более точно, *sha-bang* определяет интерпретатор, который вызывается для исполнения сценария, это может быть командная оболочка (shell), иной интерпретатор или утилита. 

```
#!/bin/sh
#!/bin/bash
#!/usr/bin/perl
#!/usr/bin/tcl
#!/bin/sed -f
#!/usr/awk -f
```
Каждая, из приведенных выше сигнатур, приводит к вызову различных интерпретаторов, будь то ```#!/bin/sh``` - командный интерпретатор по-умолчанию и UNIX (bash для Linux-систем), либо иной. При переносе сценариев с сигнатурой ```#!/bin/sh``` на другие UNIX системы, где в качестве командного интерпретатора задан другой shell, вы можете лишиться некоторых особенностей, присущих bash.

## Запуск сценария
Запустить сценарий можно командой ```bash scriptname```. Более удобный вариант - сделать файл скрипта исполняемым, командой ```chmod```.

```bash
chmod u+x scriptname
```
 > [!WARNING]
 > Мы с Вами работаем с Cygwin на платформе Windows и даннуб команду выполнять нет необходимости. 

После того, как вы сделаете файл сценария исполняемым, вы можете запустить его примерно такой командой ```./scriptname```. Если, при этом, текст сценария начинается с корректной сигнатуры ("sha-bang"), то для его исполнения будет вызван соответствующий интерпретатор.

И наконец, завершив отладку сценария, вы можете поместить его в каталог /usr/local/bin (естественно, что для этого вы должны обладать правами root), чтобы сделать его доступным для себя и других пользователей системы. После этого сценарий можно вызвать, просто напечатав название файла в командной строке и нажав клавишу ```ENTER```.

> [!IMPORTANT]
> Другой вариант сделать скрипт доступным из любой точки системы добавить адрес каталога в переменную окружения ```PATH```

> [!NOTE]
> 1. Системные администраторы часто создают скрипты для автоматизации своего труда. Подумайте, для выполнения каких задач могут быть написаны сценарии.
> 1. Напишите сценарий, который выводит дату, время, имя пользователей и сохраняет эту информацию в файл.

## Зарезервированные слова
Зарезервированные слова - это слова, которые имеют особое значение для оболочки. Они используются для начала и завершения составных команд оболочки.
```
if  then  elif  else  fi 
time
for  in  until  while  do  done
case  esac  coproc  select  function
{ } [[ ]] !
```

> [!IMPORTANT]
> Так же в написании скриптов используются служебные символы. Перечень их достаточно большой. Более подробно мы их изучим позже.

## Управляющие символы
Изменяют поведение терминала или управляют выводом текста. Управляющий символ набирается с клавиатуры как комбинация ```CONTROL + <клавиша>```.

### Ctl-C
Завершение выполнения процесса.

### Ctl-D
Выход из командного интерпретатора (log out) (аналог команды exit).

### Ctl-G
"BEL" (звуковой сигнал -- "звонок").

### Ctl-L
Перевод формата (очистка экрана (окна) терминала). Аналогична команде clear.

### Ctl-U
Стирание строки ввода.

### Ctl-Z
Приостановка процесса.

## Пробельный символ
Используется как разделитель команд или переменных. В качестве пробельного символа могут выступать - **собственно пробел (space)**, **символ табуляции**, **символ перевода строки**, **символ возврата каретки** или комбинация из вышеперечисленных символов. В некоторых случаях, таких как присваивание значений переменным, использование пробельных символов недопустимо.


