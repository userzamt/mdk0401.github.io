# Урок 06. Ветвление. Операции сравнения. Сравнение файлов
[На главную](/mdk0401.github.io)

Ветвления в Bash оформляются так, как это было придумано в оригинальном Bourne Shell:

```
if <командный список>; then
    <командный список>
elif <командный список>; then
    <командный список>
else
    <командный список>
fi
```

**Командным списком в Bash называется последовательность, состоящая минимум из одной команды или одного конвейера**. Интерпретатор распознает командный список по следующим синтаксическим якорям:

+ строка заканчивается точкой с запятой (;), амперсандом (&) или символом новой строки;

+ предыдущее условие плюс, если команд несколько, они отделяются символом точки с запятой (;), амперсандом (&), двойным амперсандом (&&), либо двумя вертикальными линиями (||).

**Обратим внимание на следующие важные моменты**

+ Выражение после ключевых слов ```if``` и elif``` является командным списком, т.е. при желании вы можете написать в условии целую подпрограмму в соответствии с правилами оформления командных списков. Эта особенность отличает язык командной оболочки от многих языков программирования, например языка Си, где есть понятие условное выражение.

+ По умолчанию, в командном списке анализируется только код самой последней команды этого списка. Для конвейеров анализируется только результат последней команды конвейера. **ИСТИНОЙ в Bash считается нулевой возвращаемый код, а все другие являются ЛОЖЬЮ**.

+ Командный список, исполняемый на одной из ветвей не должен быть пустым. Пустой список является синтаксической ошибкой.

+ Для ```if``` и ```elif``` признаком начала тела ветвления является ключевое слово ```then```, и это обязательная часть синтаксиса языка. Концом ответвления является начало следующего, ключевое слово ```fi```, либо ```else```. Следующее за ```then``` слово интерпретируется как команда, поэтому при желании часть командного списка тела ветвления (или весь командный список), может находиться с ```then``` на одной строке и никак специально не разделяться.

+ Ответвление ```else``` должно находиться всегда последним и следующая за ```else``` строка интерпретируется как команда. Для этого ответвления признаком конца является ключевое слово ```fi```.
    
+ Как и в любом другом языке программирования, с похожим оформлением ветвлений, ответвления ```elif``` и ```else``` являются не обязательными.

Абстрагируясь от командного наполнения, следующая запись демонстрирует синтаксически верную запись одной строкой.

```bash
if : ; then : ; elif : ; then : else : ; fi

# Многострочная запись №1
if :; then
   :
elif :; then
   :
else 
  :
fi
# Многострочная запись №2 (классическая)
if :
then
   :
elif :
then
   :
else 
  :
fi
```

Для демонстрации использовалась команда-пустышка ```:```, которая всегда возвращает нулевой код и ничего не делает. По смыслу эта команда соответствует pass в Python. Использовали её в конструкциях ветвления, потому что командные списки не могут быть пустыми.

Ввиду того что синтаксис ветвления в Bourne Shell был вдохновлен языком Алгол-68, а первые языки (такие как Алгол-68) испытывали тенденции быть похожими на английский язык, используется ключевое слово ```then```, чтобы обозначить начало блока ветвления. В современных реалиях это уже кажется неудобным архаизмом, но исторически сложилось так, как сложилось.


