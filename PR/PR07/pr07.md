# ПР07 Обработка больших объемов текста в Bash

[На главную](/mdk0401.github.io)

> [!WARNING]
> Файл для анализа находится в облаке по адресу [access.log](https://disk.yandex.ru/d/GM_siqqbVTvTWA)
> А так же в папке *Материалы для студентов/МДК04.01 Bash/access.zip*

Ваша задача выполнить анализ лог файла `access.log` в соответствии с заданием.

> [!IMPORTANT]
> Разрешено использовать для анализа файла только команды `awk` и `sed`.

Структура записи в лог файле(по порядку):
+ `13.66.139.0` - IP адрес, с которого пришел запрос
+ `[19/Dec/2020:13:57:26 +0100]` - дата когда поступил запрос на веб-сервер, с указанием часового пояса
+ `"GET /index.php?option=com_phocagallery&view=category&id=1:almhuette-raith&Itemid=53 HTTP/1.1"` - стартовая строка ответа сервера, содержащая используемый метод доступа, путь до запрашиваемого ресурса и версия HTTP протокола
+ `200` - код завершения запроса
+ `32653` - количество байт 
+ `"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.88 Safari/537.36"` - обозначение браузера, которым пользователь запросил ресурс

> [!NOTE]
> Выше представлено описание только первой записи в файле. Остальные записи могут отличать, но общая структура сохранена для всех записей в файле.

[Циклы в AWK](https://www.gnu.org/software/gawk/manual/html_node/For-Statement.html)

[sort](https://en.wikipedia.org/wiki/Sort_(Unix))

[column](https://man7.org/linux/man-pages/man1/column.1.html)

## Задание 1
Найти в лог файле информацию по запросам на которые сервер ответил ошибкой `404`. Результат выборки записать в выходной файл *out1.txt*.

В файле отразить следующую информацию 
+ IP адрес
+ дата запроса, без указания часового пояса
+ путь до запрашиваемого ресурса
+ код завершения запроса
+ количество байт

## Задание 2
Подсчитать по каждому IP адресу общий объём загруженных файлов формата `.jpg` (в байтах).

В отчёте не должны повторятся адреса. Подсчитывать только успешные запросы на загрузку файлов формата `.jpg`(возвращающие статус `200`). 

Результат сохранить в файл *out2.txt* и отсортировать в нём строки по IP адресу. 

Данные записать в файл в виде таблицы. 

Так же в отчете отразить следующую
+ IP адрес с которого шли запросы
+ общий размер всех загруженных файлов(в байтах)
