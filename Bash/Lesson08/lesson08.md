# Урок 08. Параметры и ключи командной строки
[На главную](/mdk0401.github.io)

Наиболее распространённый способ передачи данных сценариям заключается в использовании параметров командной строки. Вызвав сценарий с параметрами, мы передаём ему некую информацию, с которой он может работать. 

```bash
$ ./myfunc.sh 10 20
```

В данном примере сценарию передано два параметра — ```10``` и ```20```. Всё это хорошо, но как прочесть
данные в скрипте?

## Чтение параметров командной строки
Оболочка bash назначает специальным переменным, называемым позиционными параметрами, введённые при вызове скрипта параметры командной строки:

+ ```$0``` — имя скрипта.
+ ```$1``` — первый параметр.
+ ```$2``` — второй параметр — и так далее, вплоть до переменной ```$9```, в которую попадает девятый
параметр.

> [!IMPORTANT]
> Если скрипту надо больше девяти параметров, при обращении к ним номер в имени переменной надо заключать в фигурные скобки
> ```${10}```

```bash
# запустите скрипт с указанием параметров(через пробелы) после его имени
echo $0
echo $1
echo $2 
```

```bash
if [ -n "$1" ] && [ -n "$2" ]
then
    # summ=$[ $1 + $2 ] # old 
    summ=$(( $1 + $2 )) # new version 

    echo $summ
else
    exit 1  # exit with error
fi
```

Параметры командной строки не обязательно должны быть числами. Сценариям можно передавать и строки.

```bash
# изменим вывод результат из прошлого примера
echo "$1 + $2 = $summ"
```

Что если параметр содержит пробелы, а нам надо обрабатывать его как самостоятельный фрагмент данных? **Необходимо использовать кавычки**.

```bash
$ ./myfunc.sh "Иванов Иван Иванович"
# $1 = "Иванов Иван Иванович"
```

## Работа с параметрами
В скрипте можно подсчитать количество переданных ему параметров. Оболочка bash предоставляет для этого специальную переменную. А именно, переменная ```$#``` содержит количество параметров, переданных сценарию при вызове.

```bash
$ ./myfunc.sh Иванов Иван Иванович
```

```bash
echo "Количество переданных параметров - $#"
```
Эта переменная даёт необычный способ получения последнего из переданных скрипту параметров, не требующий знания их количества.

```bash
echo "Последний параметр имеет значение - ${!#}"
```

В некоторых случаях нужно захватить все параметры, переданные скрипту. Для этого можно воспользоваться переменными ```$*``` и ```$@```. Обе они содержат все параметры командной строки, что делает возможным доступ к тому, что передано сценарию, без использования позиционных
параметров.

Переменная ```$*``` содержит все параметры, введённые в командной строке, в виде единого «слова».

В переменной ```$@``` параметры разбиты на отдельные «слова». Эти параметры можно перебирать в циклах.

```bash
list=$@
str=$*

echo $list
echo $str

echo "For \$@"
for var in "$@"
do
    echo -e "\t$var"
done

echo "For \$*"
for var in "$*"
do
    echo -e "\t$var"
done
```

Переменная ```$*``` содержит все переданные скрипту параметры как единый фрагмент данных, в то время как в переменной ```$@``` они представлены самостоятельными значениями. Какой именно переменной воспользоваться — зависит от того, что именно нужно в конкретном сценарии.
