# Урок 14. Регулярные выражения

[На главную](/mdk0401.github.io)

**Выражение** - это строка символов. Символы, которые имеют особое назначение, называются **метасимволами**. Так, например, кавычки могут выделять прямую речь, т.е. быть метасимволами для строки, заключенной в эти кавычки. 

**Регулярные выражения** - это набор символов и/или метасимволов, которые наделены особыми свойствами. Основное назначение регулярных выражений - это поиск текста по шаблону и работа со строками.

**Регулярные выражения** — это специальным образом записанные строки, используемые для поиска символьных шаблонов в тексте. 

Многие утилиты для работы с текстом в Linux и языки программирования включают в себя механизм регулярных выражений. Здесь возникают проблемы: разные программы и языки оперируют различными диалектами регулярных выражений. 

## Типы регулярных выражений
Реализации регулярных выражений в различных средах, например, в языках программирования вроде Java, Perl и Python, в инструментах Linux вроде `sed`, `awk` и `grep`, имеют определённые особенности. Эти особенности зависят от так называемых движков обработки регулярных выражений, которые занимаются интерпретацией шаблонов.

В Linux имеется два движка регулярных выражений:

+ Движок, поддерживающий стандарт **POSIX Basic Regular Expression (BRE)**.
+ Движок, поддерживающий стандарт **POSIX Extended Regular Expression (ERE)**.

Большинство утилит Linux соответствуют, как минимум, стандарту POSIX BRE, но некоторые утилиты (в их числе — sed) понимают лишь некое подмножество стандарта BRE. Одна из причин такого ограничения — стремление сделать такие утилиты как можно более быстрыми в деле обработки текстов.

Стандарт POSIX ERE часто реализуют в языках программирования. Он позволяет пользоваться большим количеством средств при разработке регулярных выражений. Например, это могут быть специальные последовательности символов для часто используемых шаблонов, вроде поиска в тексте отдельных слов или наборов цифр. Awk поддерживает стандарт ERE.

## `grep`
`grep`(global / regular expression search / and print) — это основной инструмент для работы с регулярными выражениями. 

`grep` анализирует данные со стандартного ввода, ищет совпадения с указанным шаблоном и выводит все подходящие строки. 

> [!NOTE]
> Обычно `grep` предустановлен в большинстве дистрибутивов. 

`grep` имеет следующий синтаксис:

```
grep [параметры] регулярное_выражение [файл…]
```

Самый простой случай использования `grep` — поиск строк, содержащих фиксированную подстроку.

```bash
grep '2018' --color supplier_k_import.csv
```

У `grep` имеются множество параметров. Подробно с ними ознакомиться можно в документации. Ниже приведены ключи, полезные при работе с регулярными выражениями

+ `-v` — инвертировать критерий. В этом случае grep выводит строки, не содержащие совпадений

```bash
grep -v 'ООО' supplier_k_import.csv
```

+ `-i` — игнорировать регистр символов

```bash
grep -i 'тел' --color supplier_k_import.csv
```

+ `-o` — выводить не строки, а только совпадения с шаблоном

```bash
grep -o 'ООО' --color supplier_k_import.csv

grep -o 'ООО' --color supplier_k_import.csv | wc
```

+ `-n` - вывод номера сроки при совпадении с шаблоном

```bash
grep -in --color "gnu" gnugpl.txt
```

+ `-E` - интерпретирует шаблон как расширенное регулярное выражение (ERE)


